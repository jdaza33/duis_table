(function(e){function t(t){for(var i,o,r=t[0],c=t[1],u=t[2],d=0,h=[];d<r.length;d++)o=r[d],a[o]&&h.push(a[o][0]),a[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(t);while(h.length)h.shift()();return n.push.apply(n,u||[]),s()}function s(){for(var e,t=0;t<n.length;t++){for(var s=n[t],i=!0,r=1;r<s.length;r++){var c=s[r];0!==a[c]&&(i=!1)}i&&(n.splice(t--,1),e=o(o.s=s[0]))}return e}var i={},a={app:0},n=[];function o(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,o),s.l=!0,s.exports}o.m=e,o.c=i,o.d=function(e,t,s){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(o.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)o.d(s,i,function(t){return e[t]}.bind(null,i));return s},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var u=0;u<r.length;u++)t(r[u]);var l=c;n.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"002b":function(e,t){e.exports=[{name:"C",mime:"text/x-csrc"},{name:"C++",mime:"text/x-c++src"},{name:"C#",mime:"text/x-csharp"},{name:"CCS",mime:"text/css"},{name:"DJango",mime:"text/x-django"},{name:"GO",mime:"text/x-go"},{name:"HTML",mime:"text/html"},{name:"Java",mime:"text/x-java"},{name:"Javascript",mime:"text/javascript"},{name:"JSON",mime:"application/json"},{name:"LESS",mime:"text/x-less"},{name:"PHP",mime:"text/x-php"},{name:"Python",mime:"text/x-python"},{name:"Objective-C",mime:"text/x-objectivec"},{name:"SASS",mime:"text/x-scss"},{name:"SQL",mime:"text/x-sql"},{name:"Typescript",mime:"text/typescript"},{name:"XML",mime:"application/xml"}]},"03cb":function(e,t,s){},"05cc":function(e,t,s){},1:function(e,t){},2:function(e,t){},"23ec":function(e,t,s){"use strict";var i=s("8cae"),a=s.n(i);a.a},2401:function(e,t,s){"use strict";var i=s("2b96"),a=s.n(i);a.a},2856:function(e,t,s){},"2b96":function(e,t,s){},"2d9c":function(e,t,s){"use strict";var i=s("68d7"),a=s.n(i);a.a},3:function(e,t){},4:function(e,t){},5:function(e,t){},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("097d"),s("684e"),s("6d93");var i=s("2b0e"),a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("router-view")],1)},n=[],o={},r=o,c=(s("5c0b"),s("b0a0"),s("2877")),u=Object(c["a"])(r,a,n,!1,null,null,null);u.options.__file="App.vue";var l=u.exports,d=s("8c4f"),h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-one-third master"},[s("section",{staticClass:"section"},[s("p",{staticClass:"title is-3 has-text-centered"},[e._v("¡Bienvenido!")]),s("b-field",[s("b-input",{attrs:{placeholder:"Username",type:"text","icon-pack":"fas",icon:"user",maxlength:"12",min:"5",rounded:""},model:{value:e.user.username,callback:function(t){e.$set(e.user,"username",t)},expression:"user.username"}})],1),s("b-field",[s("b-input",{attrs:{placeholder:"Contraseña",type:"password","icon-pack":"fas",icon:"key","password-reveal":"",rounded:""},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),s("div",{staticClass:"has-text-centered"},[s("a",{staticClass:"button is-vcentered is-primary is-outlined is-rounded",on:{click:function(t){e.login()}}},[e._v("Iniciar Sesión")])])],1)]),e._m(0)])},p=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"interactive-bg column master submaster"},[s("img",{staticClass:"login-logo",attrs:{src:"img/duis-full.png"}})])}],f=(s("7f7f"),s("28a5"),s("96cf"),s("3040")),m=s("bc3a"),b=s.n(m),v=function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,i){var a,n,o,r,c,u,l;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a=s("bc3a"),n="?_token=".concat("46220802"),o=function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t,s){var i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return i=null,e.next=3,a.post("".concat("https://duislessonserver.herokuapp.com","/api/login").concat(n),{username:t,password:s}).then(function(e){200==e.data.code&&(i="S001")}).catch(function(e){console.log(e),i="E001"});case 3:return e.abrupt("return",i);case 4:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),r=function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(t){var s,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=null,i=null,e.next=4,a.get("".concat("https://duislessonserver.herokuapp.com","/api/show_by_username/").concat(t).concat(n)).then(function(e){if(e.data.response.length>0){var t=e.data.response[0];s={name:t.name,id:t.id,role:t.role},i="I001"}else i="E003"}).catch(function(e){console.log(e),i="E002"});case 4:return e.abrupt("return",{data:s,code:i});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),c=null,u=null,e.next=8,r(t);case 8:if(l=e.sent,c=l.data,"I"!=l.code.split("")[0]){e.next=16;break}return e.next=13,o(t,i);case 13:u=e.sent,e.next=17;break;case 16:u=l.code;case 17:return e.abrupt("return",{data:c,code:u});case 18:case"end":return e.stop()}},e,this)}));return function(t,s){return e.apply(this,arguments)}}(),g=s("cdd9"),C=s.n(g),x=function(e,t){var s=t.split("")[0],i="S"==s?{a:"is-success",b:"success"}:"W"==s?{a:"is-warning",b:"warn"}:"I"==s?{a:"is-info",b:"info"}:{a:"is-danger",b:"error"},a=C.a[t];e.$toast.open({duration:3e3,message:a,position:"is-top",type:i.a,queue:!1})},_={name:"login",data:function(){return{show:1,user:{username:"",password:""}}},mounted:function(){},methods:{login:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,v(this.user.username,this.user.password);case 2:t=e.sent,x(this,t.code),"S"==t.code.split("")[0]&&(this.$cookie.set("userId",t.data.id,{expires:"1D"}),this.$cookie.set("username",this.user.username,{expires:"1D"}),this.$cookie.set("role",t.data.role,{expires:"1D"}),this.$cookie.set("name",t.data.name,{expires:"1D"}),this.$router.push({name:"class"}));case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}},k=_,w=(s("b0d3"),Object(c["a"])(k,h,p,!1,null,"27616f21",null));w.options.__file="Login.vue";var $=w.exports,y=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"dash"}},[s("nav",{staticClass:"navbar"},[s("div",{staticClass:"navbar-brand"},[s("a",{staticClass:"navbar-item",on:{click:function(t){e.go("login")}}},[s("img",{attrs:{src:"img/duis-min.png",width:"30",height:"28"}}),s("h1",{staticClass:"title is-3 titlecolor"},[e._v("Duis")])]),s("div",{staticClass:"navbar-burger burger",attrs:{"data-target":"nav-phone"},on:{click:function(t){e.burger()}}},[s("span"),s("span"),s("span")])]),s("div",{staticClass:"navbar-menu",attrs:{id:"nav-phone"}},[s("div",{staticClass:"navbar-end"},[s("b-dropdown",{attrs:{position:"is-bottom-left"}},[s("a",{staticClass:"navbar-item is-info",attrs:{slot:"trigger"},slot:"trigger"},[s("span",[e._v(e._s(e.username))]),s("b-icon",{attrs:{icon:"caret-down",pack:"fas"}})],1),s("b-dropdown-item",{on:{click:function(t){e.reportAbuse()}}},[s("b-icon",{attrs:{icon:"bullhorn",pack:"fas"}}),e._v("\n                     Reportar Abuso\n               ")],1),s("b-dropdown-item",{on:{click:function(t){e.logout()}}},[s("b-icon",{attrs:{icon:"sign-out-alt",pack:"fas"}}),e._v("\n                     Salir\n               ")],1)],1)],1)])]),s("div",{staticClass:"center"},[s("div",{staticClass:"is-main-content"},[s("router-view"),s("b-modal",{attrs:{active:e.isModalReportAbuseActive,"has-modal-card":""},on:{"update:active":function(t){e.isModalReportAbuseActive=t}}},[s("modal-report-abuse")],1)],1)]),e._m(0),s("b-loading",{attrs:{"is-full-page":e.isFullPage,active:e.isLoading,"can-cancel":!1},on:{"update:active":function(t){e.isLoading=t}}})],1)},E=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("footer",{staticClass:"footer"},[s("div",{staticClass:"content has-text-centered"},[s("p",[e._v("\n        ©2018 — "),s("strong",[e._v("Duis")])])])])}],S=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"modal-card",staticStyle:{width:"500px"}},[e._m(0),s("section",{staticClass:"modal-card-body"},[s("div",{staticClass:"content-card"},[s("b-input",{attrs:{placeholder:"Asunto",type:"text","icon-pack":"fas",icon:"bullhorn",maxlength:"25",min:"10",rounded:""},model:{value:e.abuse.issue,callback:function(t){e.$set(e.abuse,"issue",t)},expression:"abuse.issue"}}),s("b-input",{attrs:{placeholder:"Descripción",type:"textarea",maxlength:"75",min:"10",rounded:""},model:{value:e.abuse.description,callback:function(t){e.$set(e.abuse,"description",t)},expression:"abuse.description"}})],1)]),s("footer",{staticClass:"modal-card-foot center"},[s("a",{staticClass:"button is-vcentered is-danger is-outlined is-rounded",on:{click:function(t){e.$parent.close()}}},[e._v("Salir")]),s("a",{staticClass:"button is-vcentered is-success is-rounded",on:{click:function(t){e.save()}}},[e._v("Guardar")])])])])},P=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title has-text-centered"},[e._v("Nuevo Reclamo")])])}],I={data:function(){new Date;return{isLoading:!1,isFullPage:!0,abuse:{issue:"",user_id:this.$cookie.get("userId"),description:""}}},methods:{save:function(){var e=this;b.a.post("".concat("https://duislessonserver.herokuapp.com","/api/claim?_token=").concat("46220802"),this.abuse).then(function(t){200==t.data.code&&(e.$toast.open({message:"Reclamo enviado",type:"is-success"}),e.$parent.close())}).catch(function(t){e.$toast.open({message:"No se pudo enviar el reclamo",type:"is-danger"})})}}},O=I,T=(s("2401"),Object(c["a"])(O,S,P,!1,null,"78051932",null));T.options.__file="ModalReportAbuse.vue";var A=T.exports,M={data:function(){return{drawer:!0,preLoading:0,isLoading:!1,isFullPage:!0,userData:"",userInfoData:"",right:null,menus:[{title:"Cerrar Sesión"}],isModalReportAbuseActive:!1,isRoute:this.$router.currentRoute.name}},mounted:function(){},components:{ModalReportAbuse:A},methods:{logout:function(){this.$cookie.delete("userId"),this.$cookie.delete("username"),this.$cookie.delete("role"),this.$cookie.delete("name"),this.$cookie.delete("sessionId"),this.$cookie.delete("token"),this.$cookie.delete("classId"),this.$cookie.delete("time_h"),this.$cookie.delete("time_m"),this.$cookie.delete("time_s"),this.go("login")},go:function(e){this.$router.push({name:e})},burger:function(){var e=document.querySelector(".burger"),t=document.querySelector("#"+e.dataset.target);e.classList.toggle("is-active"),t.classList.toggle("is-active")},isNotLoading:function(){2==this.preLoading&&(this.isLoading=!1)},loadDataUser:function(){this.username=this.$cookie.get("username"),this.userId=this.$cookie.get("userId")},reportAbuse:function(){this.isModalReportAbuseActive=!0}},created:function(){this.loadDataUser()},watch:{}},L=M,j=(s("8501"),Object(c["a"])(L,y,E,!1,null,"d9a323f2",null));j.options.__file="Panel.vue";var D=j.exports,R=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-9"},[s("section",[s("b-tabs",{attrs:{position:"is-centered",type:"is-toggle-rounded"}},[s("b-tab-item",{attrs:{label:"Editor de Texto",icon:"edit","icon-pack":"fas"}},[s("vue-editor",{ref:"editor",attrs:{editorToolbar:e.toolbarEditText},on:{"selection-change":function(t){e.postEditText()}},nativeOn:{keyup:function(t){e.postEditText()}},model:{value:e.textEdit,callback:function(t){e.textEdit=t},expression:"textEdit"}}),s("br"),s("a",{staticClass:"button is-vcentered is-success is-rounded",attrs:{target:"_blank"},on:{click:function(t){e.saveEditText()}}},[s("span",{staticClass:"icon"},[s("i",{staticClass:"fas fa-save"})]),s("span",[e._v("Guardar Texto")])])],1),s("b-tab-item",{attrs:{label:"Editor de Codigo",icon:"code","icon-pack":"fas"}},[s("b-tabs",{attrs:{size:"is-small"}},e._l(e.listEditCode,function(t,i){return s("b-tab-item",{key:i,attrs:{label:"Nro. "+(i+1)},model:{value:e.activeTabCode,callback:function(t){e.activeTabCode=t},expression:"activeTabCode"}},[s("b-field",{attrs:{grouped:""}},[s("a",{staticClass:"button is-success is-outlined space-min-right",on:{click:function(t){e.addTabCode()}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-file-code"})])]),s("a",{staticClass:"button is-danger is-outlined space-right",on:{click:function(t){e.deleteTabCode(i)}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-file-export"})])]),s("b-select",{attrs:{placeholder:"Lenguajes",icon:"file-code","icon-pack":"fas"},model:{value:t.cmOptions.mode,callback:function(s){e.$set(t.cmOptions,"mode",s)},expression:"item.cmOptions.mode"}},e._l(t.modes,function(t,i){return s("option",{key:i,domProps:{value:t.mime}},[e._v(e._s(t.name))])})),s("a",{staticClass:"button",on:{click:function(t){e.setCodeEdit("-",i)}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-search-minus"})])]),s("a",{staticClass:"button space-right",on:{click:function(t){e.setCodeEdit("+",i)}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-search-plus"})])]),s("a",{staticClass:"button is-primary is-outlined",on:{click:function(t){e.saveCode(i)}}},[s("span",{staticClass:"icon is-small"},[s("i",{staticClass:"fas fa-save"})])])],1),s("codemirror",{style:"font-size: "+t.sizeCode+"px;",attrs:{options:t.cmOptions},nativeOn:{keyup:function(t){e.postCode(i)}},model:{value:t.codeEdit,callback:function(s){e.$set(t,"codeEdit",s)},expression:"item.codeEdit"}})],1)}))],1),s("b-tab-item",{attrs:{label:"Tabla de Dibujo",icon:"palette","icon-pack":"fas"}},[s("paint")],1)],1)],1)]),s("div",{staticClass:"column is-3"},[s("b-taglist",{attrs:{attached:""}},[s("b-tag",{attrs:{type:"is-dark"}},[e._v("Tiempo")]),s("b-tag",{attrs:{type:"is-info"}},[e._v(e._s(e.time.hour+":"+e.time.min+":"+e.time.s))])],1),s("div",{staticClass:"card"},[s("div",{staticClass:"card-content"},e._l(e.streams,function(t,i){return s("div",{key:i,attrs:{id:"subscribers"}},[s("subscriber",{attrs:{opts:e.optsTwo,stream:t,session:e.session},on:{error:e.errorHandler}})],1)})),s("div",{staticClass:"card-content center"},e._l(e.statusPublisher,function(e,t){return s("div",{directives:[{name:"show",rawName:"v-show",value:e,expression:"item"}],key:t,attrs:{id:"publisher"+t}})})),s("div",{staticClass:"card-footer"},[s("a",{class:1==e.isPublishVideo?"button is-medium is-success is-outlined card-footer-item":"button is-medium is-danger card-footer-item",on:{click:function(t){e.isVideo()}}},[e._m(0)]),s("a",{class:1==e.isPublishAudio?"button is-medium is-success is-outlined card-footer-item":"button is-medium is-danger card-footer-item",on:{click:function(t){e.isAudio()}}},[e._m(1)])])]),s("chat",{staticClass:"chat",attrs:{messageList:e.messageList}})],1)])])},V=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-medium"},[s("i",{staticClass:"fas fa-video"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-medium"},[s("i",{staticClass:"fas fa-volume-up"})])}],q=(s("6b54"),s("33ba")),N=s.n(q),U=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},z=[],F={name:"publisher",props:{session:{type:N.a.Session,required:!1},opts:{type:Object,required:!1}},mounted:function(){var e=this,t=N.a.initPublisher(this.$el,this.opts,function(t){t?e.$emit("error",t):e.$emit("publisherCompleted")});this.$emit("publisherCreated",t);var s=function(){e.session.publish(t,function(s){s?e.$emit("error",s):e.$emit("publisherConnected",t)})};this.session&&this.session.isConnected()&&s(),this.session&&this.session.on("sessionConnected",s)}},J=F,K=Object(c["a"])(J,U,z,!1,null,null,null);K.options.__file="Publisher.vue";K.exports;var W=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div")},X=[],Y={name:"subscriber",props:{stream:{type:OT.Stream,required:!0},session:{type:OT.Session,required:!0},opts:{type:Object,required:!1}},mounted:function(){var e=this,t=this.session.subscribe(this.stream,this.$el,this.opts,function(s){s?e.$emit("error",s):e.$emit("subscriberConnected",t)});this.$emit("subscriberCreated",t)}},B=Y,G=Object(c["a"])(B,W,X,!1,null,null,null);G.options.__file="Subscriber.vue";var H=G.exports,Q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("beautiful-chat",{attrs:{participants:e.participants,titleImageUrl:e.titleImageUrl,onMessageWasSent:e.onMessageWasSent,messageList:e.messageList,newMessagesCount:e.newMessagesCount,isOpen:e.isChatOpen,close:e.closeChat,open:e.openChat,showEmoji:!1,showFile:!1,showTypingIndicator:e.showTypingIndicator,colors:e.colors,alwaysScrollToBottom:e.alwaysScrollToBottom}})],1)},Z=[],ee=s("323e"),te=s.n(ee);te.a.configure({showSpinner:!1}),te.a.configure({minimum:.3});var se="https://app-duis.herokuapp.com",ie=b.a.create({baseURL:se,timeout:3e4});ie.interceptors.request.use(function(e){return te.a.start(),e}),ie.interceptors.response.use(function(e){return te.a.done(),e});var ae=ie,ne={name:"app",props:["messageList"],data:function(){return{participants:[{id:"0",name:"Clase",imageUrl:"https://avatars3.githubusercontent.com/u/1915989?s=230&v=4"}],titleImageUrl:"img/duis-min.png",newMessagesCount:0,isChatOpen:!1,showTypingIndicator:"",colors:{header:{bg:"#e65c00",text:"#ffffff"},launcher:{bg:"#e65c00"},messageList:{bg:"#ffffff"},sentMessage:{bg:"#e65c00",text:"#ffffff"},receivedMessage:{bg:"#eaeaea",text:"#222222"},userInput:{bg:"#f4f7f9",text:"#565867"}},alwaysScrollToBottom:!1}},methods:{sendMessage:function(e){},onMessageWasSent:function(e){ae.post("/message/send",{roomId:"19374073",userId:this.$cookie.get("userId").toString(),message:e.data.text}).then(function(e){console.log(e)}).catch(function(e){console.log(e)})},openChat:function(){this.isChatOpen=!0,this.newMessagesCount=0},closeChat:function(){this.isChatOpen=!1}}},oe=ne,re=Object(c["a"])(oe,Q,Z,!1,null,null,null);re.options.__file="Chat.vue";var ce=re.exports,ue=(s("f30f"),s("1d94")),le=s.n(ue),de=s("b3e9"),he=s("726d"),pe=s("8f94"),fe=s("002b"),me=s.n(fe),be=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{attrs:{id:"app"}},[s("div",{staticClass:"main"},[s("canvas",{directives:[{name:"canvas",rawName:"v-canvas",value:{size:e.size},expression:"{size}"}]})])])])},ve=[],ge=(s("ac6a"),s("c93e")),Ce=s("11c1"),xe=s("782e"),_e=s.n(xe);function ke(e,t){var s=e,i=s.getContext("2d");s.width=1e3,s.height=400,i.lineJoin="round",i.lineCap="round",i.lineWidth=t.value.size;var a=new _e.a("0f5f2bf6cc6d01e862a4",{cluster:"us2"}),n=a.subscribe("painting"),o={offsetX:0,offsetY:0},r=[],c=!1,u=Object(Ce["v4"])(),l="black",d="black";function h(e){var t=e.offsetX,s=e.offsetY;c=!0,o={offsetX:t,offsetY:s}}function p(){c&&(c=!1,m())}function f(e){if(c){var t=e.offsetX,s=e.offsetY,i={offsetX:t,offsetY:s},a={start:Object(ge["a"])({},o),stop:Object(ge["a"])({},i)};r=r.concat(a),b(o,i,l)}}function m(){var e={line:r,userId:u};fetch("".concat("https://app-duis.herokuapp.com","/paint"),{method:"post",body:JSON.stringify(e),headers:{"content-type":"application/json"}}).then(function(){return r=[]})}function b(e,t,s){var a=t.offsetX,n=t.offsetY,r=e.offsetX,c=e.offsetY;i.beginPath(),i.strokeStyle=s,i.moveTo(r,c),i.lineTo(a,n),i.stroke(),o={offsetX:a,offsetY:n}}s.addEventListener("mousedown",h),s.addEventListener("mousemove",f),s.addEventListener("mouseup",p),s.addEventListener("mouseleave",p),n.bind("draw",function(e){var t=e.userId,s=e.line;u!==t&&s.forEach(function(e){b(e.start,e.stop,d)})})}var we={inserted:ke},$e={data:function(){return{size:5}},directives:{canvas:we},methods:{maxSize:function(){this.size+=5,this.$forceUpdate()}}},ye=$e,Ee=(s("625c"),Object(c["a"])(ye,be,ve,!1,null,null,null));Ee.options.__file="Canvas.vue";var Se=Ee.exports,Pe=s("8045").Stopwatch,Ie=Pe.create(),Oe=function(e){console.log("error --\x3e "+e)},Te={data:function(){return{username:"",userId:"",classId:"",timer:"",time:{hour:0,min:0,s:0},apiKey:"46220802",sessionId:"",token:"",streams:[],session:null,optsOne:{publishAudio:!0,publishVideo:!0,videoSource:!0,height:"80px",width:"50%"},channel:{},chatManager:"",currentUser:null,messageList:[],listEditCode:[],activeTabCode:0,isPublish:!1,publisher:null,statusPublisher:[!1,!1,!1,!1,!1,!1,!1,!1,!1,!1],contPublisher:0,optsTwo:{publishAudio:!0,publishVideo:!0,videoSource:!0,height:"120px",width:"100%"},isPublishVideo:!0,isPublishAudio:!0,textEdit:"",toolbarEditText:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],[{indent:"-1"},{indent:"+1"}]],table:null,size:15}},components:{Chat:ce,Subscriber:H,codemirror:pe["codemirror"],msDrawBoard:le.a,VueEditor:de["VueEditor"],Paint:Se},created:function(){var e=this;if(Ie.start(),this.timer=setInterval(function(){var t=parseInt(Ie.elapsed.seconds);t>59?(e.time.min+=1,60==e.time.min&&(e.time.min=0,e.time.hour+=1),Ie.restart(),e.time.s=0):e.time.s=t},1e3),this.sessionId=this.$cookie.get("sessionId").toString(),this.token=this.$cookie.get("token").toString(),this.classId=this.$cookie.get("classId").toString(),this.username=this.$cookie.get("username").toString(),this.userId=this.$cookie.get("userId").toString(),void 0!=this.classId){this.session=N.a.initSession(this.apiKey,this.sessionId),this.session.connect(this.token,function(e){e&&Oe(e)}),null!=this.publisher&&(this.publisher.on("streamCreated",function(e){}),this.publisher.on("streamDestroyed",function(e){})),this.session.on("streamCreated",function(t){e.streams.push(t.stream)}),this.session.on("streamDestroyed",function(t){var s=e.streams.indexOf(t.stream);s>-1&&e.streams.splice(s,1)});var t=new Pusher("8f742a687d8bb741545f",{cluster:"us2",encrypted:!0,forceTLS:!0,authEndpoint:"".concat("https://duislessonserver.herokuapp.com","/api/pusher/auth")});this.channel=t.subscribe("private-".concat(this.classId)),this.channel.bind("client-new-text",function(t){e.setTextEdit(t)}),this.channel.bind("client-new-code",function(t){e.setCode(t)})}else this.$router.push({name:"class"})},mounted:function(){var e=this;this.addTabCode(),this.accessVideCam(),this.chatManager=new he["ChatManager"]({instanceLocator:"v1:us1:8bd51fc5-238c-41f3-9cf4-d998d087171b",userId:this.$cookie.get("userId").toString(),tokenProvider:new he["TokenProvider"]({url:"https://us1.pusherplatform.io/services/chatkit_token_provider/v1/8bd51fc5-238c-41f3-9cf4-d998d087171b/token"})}),console.log("chatManager",this.chatManager),this.chatManager.connect().then(function(t){e.currentUser=t,t.subscribeToRoom({roomId:t.rooms[0].id,hooks:{onMessage:function(t){e.messageList.push({type:"text",author:t.senderId.toString()==e.$cookie.get("userId").toString()?"me":"0",data:{text:t.text}}),e.$forceUpdate()}}})}).catch(function(e){console.log("Error on connection",e)})},watch:{},methods:{errorHandler:Oe,proa:function(){console.log("SII")},addTabCode:function(){var e={codeEdit:"//Escribe tu codigo",modes:me.a,sizeCode:14,cmOptions:{tabSize:2,styleActiveLine:!0,lineNumbers:!0,styleSelectedText:!0,line:!0,foldGutter:!0,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],highlightSelectionMatches:{showToken:/\w/,annotateScrollbar:!0},mode:"text/javascript",hintOptions:{completeSingle:!1},keyMap:"sublime",matchBrackets:!0,showCursorWhenSelecting:!0,theme:"monokai",extraKeys:{Ctrl:"autocomplete"},autofocus:!0}};this.listEditCode.push(e)},finishClass:function(){},setFocusEditText:function(){this.$refs.editor.quill.focus()},setBlurEditText:function(){this.$refs.editor.quill.blur()},setCodeEdit:function(e,t){"-"==e&&(this.listEditCode[t].sizeCode-=1),"+"==e&&(this.listEditCode[t].sizeCode+=1)},accessVideCam:function(){var e=this;this.$dialog.confirm({title:"Acceso a videollamada",message:"¿Desea habilitar el <br> acceso a la videollamada?",confirmText:"¡Si claro!",cancelText:"No",type:"is-success",hasIcon:!0,iconPack:"fas",icon:"video",onConfirm:function(){e.$toast.open("Videollamada: OK"),e.showPublish()},onCancel:function(){}})},isVideo:function(){1==this.isPublish?(1==this.isPublishVideo?(this.publisher.publishVideo(!1),this.isPublishVideo=!1):(this.publisher.publishVideo(!0),this.isPublishVideo=!0),0==this.isPublishVideo&&0==this.isPublishAudio&&this.showPublish()):0==this.isPublish&&(this.showPublish(),this.publisher.publishAudio(!1),this.isPublishAudio=!1),this.$forceUpdate()},isAudio:function(){1==this.isPublish?(1==this.isPublishAudio?(this.publisher.publishAudio(!1),this.isPublishAudio=!1):(this.publisher.publishAudio(!0),this.isPublishAudio=!0),0==this.isPublishVideo&&0==this.isPublishAudio&&this.showPublish()):0==this.isPublish&&(this.showPublish(),this.publisher.publishVideo(!1),this.isPublishVideo=!1),this.$forceUpdate()},showPublish:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.isPublish){e.next=10;break}return this.statusPublisher[this.contPublisher]=!0,this.publisher=N.a.initPublisher("publisher".concat(this.contPublisher),this.optsOne,function(e){e&&console.log(e)}),this.session.publish(this.publisher,function(e){e&&console.log("error",e)}),this.isPublish=!0,this.contPublisher+=1,e.next=8,b.a.post("".concat("https://duislessonserver.herokuapp.com","/api/startarchive/").concat(this.sessionId,"?_token=").concat("46220802")).then(function(e){console.log("OK",e)}).catch(function(e){console.log("Error",e)});case 8:e.next=18;break;case 10:return this.session.unpublish(this.publisher),this.publisher=null,this.isPublish=!1,this.isPublishVideo=!0,this.isPublishAudio=!0,this.statusPublisher[this.contPublisher-1]=!0,e.next=18,b.a.post("".concat("https://duislessonserver.herokuapp.com","/api/stoparchive/").concat(this.sessionId,"?_token=").concat("46220802")).then(function(e){console.log("OK",e)}).catch(function(e){console.log("Error",e)});case 18:this.$forceUpdate();case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),postEditText:function(e){this.channel.trigger("client-new-text",this.textEdit)},postCode:function(e){this.channel.trigger("client-new-code",this.listEditCode)},setTextEdit:function(e){this.setBlurEditText(),this.textEdit=e},setCode:function(e){this.listEditCode=e},saveEditText:function(){console.log("error al descargar")},saveCode:function(){}}},Ae=Te,Me=(s("23ec"),s("e8ca"),Object(c["a"])(Ae,R,V,!1,null,"3d25c74f",null));Me.options.__file="Tablero.vue";var Le=Me.exports,je=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"columns"},[s("div",{staticClass:"column is-1"},[s("div",{staticClass:"card center"},[s("div",{staticClass:"card-content"},[s("a",{staticClass:"button is-large is-vcentered is-success is-outlined ismenu",on:{click:function(t){"teacher"==e.role?e.isModalClassActive=!0:e.notifyStudent("W001")}}},[e._m(0)]),e._m(1)])])]),s("div",{staticClass:"column is-11"},[s("div",{staticClass:"columns is-gapless is-multiline is-mobile"},e._l(e.dataClass,function(t,i){return s("div",{key:i,staticClass:"column is-one-quarter"},[s("div",{staticClass:"card class"},[s("div",{staticClass:"card-header"},[s("p",{staticClass:"card-header-title"},[e._v(e._s(t.name))]),s("a",{staticClass:"card-header-icon",attrs:{"aria-label":"more options"}},[s("b-icon",{attrs:{type:{"is-success":!0},icon:"circle",pack:"fas"}})],1)]),s("div",{staticClass:"card-content"},[s("strong",[e._v("Tema: ")]),e._v(e._s(t.theme)+" "),s("br"),s("strong",[e._v("Profesor(a): ")]),e._v(e._s(t.teacher_name)+" "),s("br"),s("strong",[e._v("Fecha inicio: ")]),e._v(" "+e._s(t.date_start.substring(0,10))+" "),s("br"),s("strong",[e._v("Fecha fin: ")]),e._v(" "+e._s(t.due_date.substring(0,10))+"\n            ")]),s("div",{staticClass:"card-footer"},[s("a",{staticClass:"card-footer-item",on:{click:function(s){e.assignClass(t._id,t.sessionId,t.token)}}},[s("strong",[e._v("Tomar esta clase..")])])])])])}))]),s("b-modal",{attrs:{active:e.isModalClassActive,"has-modal-card":""},on:{"update:active":function(t){e.isModalClassActive=t}}},[s("modal-class")],1)],1)])},De=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("span",{staticClass:"icon is-large"},[s("i",{staticClass:"fas fa-plus-circle"})])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("a",{staticClass:"button is-large is-vcentered is-danger is-outlined ismenu"},[s("span",{staticClass:"icon is-large"},[s("i",{staticClass:"fas fa-times-circle"})])])}],Re=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("div",{staticClass:"modal-card",staticStyle:{width:"500px"}},[e._m(0),s("section",{staticClass:"modal-card-body"},[s("div",{staticClass:"content-card"},[s("b-input",{attrs:{placeholder:"Nombre de la clase",type:"text","icon-pack":"fas",icon:"chalkboard-teacher",maxlength:"25",min:"10",rounded:""},model:{value:e.classroom.name,callback:function(t){e.$set(e.classroom,"name",t)},expression:"classroom.name"}}),s("b-input",{attrs:{placeholder:"Tema de la clase",type:"text","icon-pack":"fas",icon:"chalkboard-teacher",maxlength:"25",min:"10",rounded:""},model:{value:e.classroom.theme,callback:function(t){e.$set(e.classroom,"theme",t)},expression:"classroom.theme"}}),s("b-input",{attrs:{placeholder:"Profesor",type:"text","icon-pack":"fas",icon:"graduation-cap",maxlength:"20",min:"10",rounded:""},model:{value:e.classroom.teacher_name,callback:function(t){e.$set(e.classroom,"teacher_name",t)},expression:"classroom.teacher_name"}}),s("b-datepicker",{attrs:{placeholder:"Fecha de inicio",icon:"calendar-alt","icon-pack":"fas",rounded:"",disabled:""},model:{value:e.classroom.date_start,callback:function(t){e.$set(e.classroom,"date_start",t)},expression:"classroom.date_start"}}),s("b-datepicker",{attrs:{placeholder:"Fecha de fin",icon:"calendar-alt","icon-pack":"fas",rounded:"",disabled:""},model:{value:e.classroom.due_date,callback:function(t){e.$set(e.classroom,"due_date",t)},expression:"classroom.due_date"}})],1)]),s("footer",{staticClass:"modal-card-foot center"},[s("a",{staticClass:"button is-vcentered is-danger is-outlined is-rounded",on:{click:function(t){e.$parent.close()}}},[e._v("Salir")]),s("a",{staticClass:"button is-vcentered is-success is-rounded",on:{click:function(t){e.save()}}},[e._v("Guardar")])])]),s("b-loading",{attrs:{"is-full-page":e.isFullPage,active:e.isLoading},on:{"update:active":function(t){e.isLoading=t}}})],1)},Ve=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("header",{staticClass:"modal-card-head"},[s("p",{staticClass:"modal-card-title has-text-centered"},[e._v("Nueva clase")])])}],qe={data:function(){var e=new Date;return{isLoading:!1,isFullPage:!0,classroom:{name:"",teacher_id:this.$cookie.get("userId"),teacher_name:this.$cookie.get("name"),theme:"",token:"",sessionId:"",date_start:new Date,due_date:new Date(e.getFullYear(),e.getMonth(),e.getDate()+1)}}},methods:{save:function(){var e=this;ae.post("/class/new",this.classroom).then(function(t){t.data.res&&(e.$toast.open({message:"[OK] Clase creada con exito",type:"is-success"}),e.$parent.close())}).catch(function(t){e.$toast.open({message:"[Error] No se pudo crear la clase",type:"is-danger"})})},getKeys:function(){var e=this;this.isLoading=!0,b.a.get("".concat("https://duislessonserver.herokuapp.com","/api/sessionid?_token=").concat("46220802","&user_id=").concat(this.$cookie.get("userId"),"&session_role=m&archive_mode=m")).then(function(t){e.isLoading=!1,e.classroom.sessionId=t.data.session_id,e.classroom.token=t.data.token_id}).catch(function(t){e.isLoading=!1,console.log(t)})}},mounted:function(){this.getKeys()},create:function(){}},Ne=qe,Ue=(s("ebe1"),Object(c["a"])(Ne,Re,Ve,!1,null,"d8ebd134",null));Ue.options.__file="ModalClass.vue";var ze=Ue.exports,Fe={data:function(){return{isModalClassActive:!1,dataClass:{},today:new Date,role:this.$cookie.get("role")}},components:{ModalClass:ze},methods:{getClass:function(){var e=Object(f["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ae.get("/class").then(function(e){e.data.res&&(t.dataClass=e.data.class)}).catch(function(e){t.$toast.open({message:"[Error] al consultar clases.",type:"is-danger"})});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),assignClass:function(e,t,s){this.$cookie.set("classId",e,{expires:"3h"}),this.$cookie.set("sessionId",t,{expires:"3h"}),this.$cookie.set("token",s,{expires:"3h"}),this.$router.push({name:"tablero"})},notifyStudent:function(e){x(this,e)}},mounted:function(){this.getClass()},create:function(){},watch:{isModalClassActive:function(){this.getClass()}}},Je=Fe,Ke=(s("2d9c"),Object(c["a"])(Je,je,De,!1,null,"2ecdaeac",null));Ke.options.__file="Class.vue";var We=Ke.exports,Xe=s("1e9f"),Ye=s.n(Xe);i["default"].use(d["a"]);var Be=new d["a"]({routes:[{path:"/",name:"login",component:$,meta:{isAuth:!0}},{path:"/panel",name:"panel",redirect:"/panel/tablero",component:D,meta:{requiredAuth:!0},children:[{path:"tablero",name:"tablero",component:Le,meta:{requiredAuth:!0}},{path:"class",name:"class",component:We,meta:{requiredAuth:!0}}]}]});Be.beforeEach(function(e,t,s){if(e.meta.requiredAuth){var i=Ye.a.get("userId");i?s():Be.push("/")}else s();if(e.meta.isAuth){var a=Ye.a.get("userId");a?Be.push("/panel"):s()}else s()});var Ge=Be,He=s("00e7"),Qe=s.n(He),Ze=s("85ff"),et=s.n(Ze),tt=s("c718"),st=(s("a7be"),s("f9d4"),s("7b00"),s("4b34"),s("4ff4"),s("44d5"),s("db91"),s("1b63"),s("ffda"),s("d5e0"),s("a84f"),s("7a7a"),s("281e"),s("31c5"),s("9948"),s("b933"),s("9b74"),s("f6b6"),s("3c98"),s("9c7b"),s("715d"),s("23de"),s("4ba6"),s("8c33"),s("7289"),s("2aed"),s("d72f"),s("0b6c"),s("9a48"),s("697e"),s("aedd"),s("164b"),s("4895"),s("cbc8"),s("8d70"),s("9f09"),s("a2c1"),s("8a03")),it=s.n(st);s("5abe");i["default"].use(Qe.a),i["default"].use(it.a,{defaultDayNames:["D","L","M","Mi","J","V","S"],defaultMonthNames:["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],defaultFirstDayOfWeek:1,defaultDateFormatter:function(e){return e.toLocaleDateString("es-ES")}}),i["default"].use(tt["a"]);var at={isEnabled:!0,logLevel:"debug",stringifyArguments:!1,showLogLevel:!1,showMethodName:!1,separator:"|",showConsoleColors:!1};i["default"].use(et.a,at),i["default"].config.productionTip=!1,new i["default"]({router:Ge,render:function(e){return e(l)}}).$mount("#app")},"5c0b":function(e,t,s){"use strict";var i=s("2856"),a=s.n(i);a.a},"625c":function(e,t,s){"use strict";var i=s("95c3"),a=s.n(i);a.a},"68d7":function(e,t,s){},8501:function(e,t,s){"use strict";var i=s("05cc"),a=s.n(i);a.a},"8cae":function(e,t,s){},"95c3":function(e,t,s){},aef0:function(e,t,s){},b0a0:function(e,t,s){"use strict";var i=s("e03b"),a=s.n(i);a.a},b0d3:function(e,t,s){"use strict";var i=s("cd90"),a=s.n(i);a.a},cd90:function(e,t,s){},cdd9:function(e,t){e.exports={S001:"Inicio de sesión exitoso",S002:"Clase creada con exito",I001:"Usuario encontrado",I002:"Clases encontradas",W001:"Los estudiantes no pueden crear clases",E001:"Error al iniciar sesión",E002:"Error al consultar usuario",E003:"Usuario no encontrado",E004:"Error al consultar clases",E005:"Error al crear la clase"}},e03b:function(e,t,s){},e8ca:function(e,t,s){"use strict";var i=s("03cb"),a=s.n(i);a.a},ebe1:function(e,t,s){"use strict";var i=s("aef0"),a=s.n(i);a.a}});
//# sourceMappingURL=app.b5ee4ae9.js.map